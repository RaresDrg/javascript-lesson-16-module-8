{"mappings":"YAaA,IAAMA,EAAUC,SAASC,eAAe,WAClCC,EAASF,SAASC,eAAe,UACjCE,EAASH,SAASC,eAAe,QAEnCG,EAAY,EACVC,EAAa,GAenB,SAASC,EAASC,GAChB,IAWqBC,EACfC,EAZAC,EAAOV,SAASW,cAAc,MACpCD,EAAKE,YAAcL,EACnBG,EAAKG,aAAa,KAAMT,GACxBD,EAAOW,OAAOJ,GAEdN,GAAa,GAOPK,EAAO,IACRF,MAFgBC,EAJPE,GAMCE,YACfH,EAAKM,QAAS,EACdN,EAAKO,GAAKR,EAAGS,aAAa,MAC1BZ,EAAWa,KAAKT,GAEhBU,IAEAC,QAAQC,IAAIhB,GAYd,SAAwBG,GACtB,IAAMc,EAAWtB,SAASW,cAAc,QACxCW,EAASV,YAAc,IACvBU,EAASC,UAAUC,IAAI,SACvBhB,EAAGM,OAAOQ,E,CA5BVG,CAAef,E,CAejB,SAASS,IACP,IAAMO,EAAcC,KAAKC,UAAUvB,GACnCwB,aAAaC,QAAQ,QAASJ,E,CAtChCxB,EAAO6B,iBAAiB,SAExB,WACE,GAAsB,KAAlBhC,EAAQiC,MAEV,YADAC,MAAM,0BAIR3B,EAASP,EAAQiC,OACjBjC,EAAQiC,MAAQ,E,IA4ClB7B,EAAO4B,iBAAiB,SAExB,SAAoBG,G,IAAAC,EAAAD,EAAEC,OACpB,GAAwB,OAApBA,EAAOC,SAGT,OAFAD,EAAOZ,UAAUc,OAAO,gBAe5B,SAA0BF,GACxB,GAAIA,EAAOZ,UAAUe,SAAS,WAAY,CACxC,IAAMC,EAAWJ,EAAOlB,aAAa,MAC/BuB,EAAwBnC,EAAWoC,WACvC,SAAAhC,G,OAAQA,EAAKO,IAAMuB,C,IAErBlC,EAAWmC,GAAuBzB,QAAS,C,CAG7C,IAAKoB,EAAOZ,UAAUe,SAAS,WAAY,CACzC,IAAMI,EAAWP,EAAOlB,aAAa,MAC/B0B,EAAwBtC,EAAWoC,WACvC,SAAAhC,G,OAAQA,EAAKO,IAAM0B,C,IAErBrC,EAAWsC,GAAuB5B,QAAS,C,CAG7CI,IACAC,QAAQC,IAAI,sCAAuChB,E,CAhCjDuC,CAAiBT,GAInB,GAAwB,SAApBA,EAAOC,SAAqB,CAC9BD,EAAOU,WAAWC,SAClB1C,GAAa,GA6BjB,SAAuBmC,GACrB,IAAMQ,EAAqB1C,EAAWoC,WAAU,SAAAhC,G,OAAQA,EAAKO,IAAMuB,C,IACnElC,EAAW2C,OAAOD,EAAoB,GAEtC3B,QAAQC,IAAI,4BAA6BhB,E,CA9BvC4C,CADiBd,EAAOU,WAAW5B,aAAa,OAkCpD,WACE,GAAIb,EAAY,EAAG,CAEjB,IADA,IAAM8C,EAAU/C,EAAOgD,iBAAiB,MAC/BC,EAAI,EAAGA,EAAIhD,EAAWgD,IAC7BF,EAAQE,GAAGvC,aAAa,KAAMuC,GAC9B/C,EAAW+C,GAAGpC,GAAKoC,EAIrB,YADAjC,G,CAIgB,IAAdf,GAtEJyB,aAAawB,WAAW,Q,CA0BtBC,E,KAkDJC,OAAOxB,iBAAiB,oBAExB,WAEuBJ,KAAK6B,MAAM3B,aAAa4B,QAAQ,UAExCC,SAAQ,SAAAjD,GACnB,IAAoB,IAAhBA,EAAKM,OAWP,OAVAT,EAASG,EAAKF,MAIIP,SAASC,eAAeQ,EAAKO,IACrCO,UAAUC,IAAI,WAExBnB,EAAWI,EAAKO,IAAID,QAAS,OAE7BI,IAIFb,EAASG,EAAKF,K","sources":["src/js/02-todo-list-storage.js"],"sourcesContent":["/* Example 2 : Todo-list (with local storage)\n\nWrite a Todo-list where you can create, delete items and save the list in local storage:\n1. we will store tasks in the form of an array of objects\n  1.1. object with fields: text, isDone, ID. The ID is required to search for items,\n    to delete items, and to update the status of items. \n  The identifier must be both in the element and in the object in the repository.\n2. when we add li to the page, we will add it to storage\n3. write the logic of the function that will retrieve data from storage and add them to the page\n  in the form of extras\n4. write the logic for removing the task from the page and for updating the status of the task.\n*/\n\nconst inpulEl = document.getElementById('myInput');\nconst addBtn = document.getElementById('addBtn');\nconst listEl = document.getElementById('myUL');\n\nlet currentId = 0;\nconst tasksArray = [];\n\n// click on addBtn //\naddBtn.addEventListener('click', addTask);\n\nfunction addTask() {\n  if (inpulEl.value === '') {\n    alert('Please, write a task !');\n    return;\n  }\n\n  createLi(inpulEl.value);\n  inpulEl.value = '';\n}\n\nfunction createLi(text) {\n  const liEl = document.createElement('li');\n  liEl.textContent = text;\n  liEl.setAttribute('id', currentId);\n  listEl.append(liEl);\n\n  currentId += 1;\n\n  createTaskObj(liEl); // daca nu il put in fata, trimite in task si x-ul de bun (span e considerat textul, li)\n  createCloseBtn(liEl);\n}\n\nfunction createTaskObj(li) {\n  const task = {};\n  task.text = li.textContent;\n  task.isDone = false;\n  task.ID = li.getAttribute('id');\n  tasksArray.push(task);\n\n  sendDataLocal();\n\n  console.log(tasksArray);\n}\n\nfunction sendDataLocal() {\n  const dataForSent = JSON.stringify(tasksArray);\n  localStorage.setItem('tasks', dataForSent);\n}\n\nfunction removeDataLocal() {\n  localStorage.removeItem('tasks');\n}\n\nfunction createCloseBtn(li) {\n  const closeBtn = document.createElement('span');\n  closeBtn.textContent = '\\u00D7';\n  closeBtn.classList.add('close');\n  li.append(closeBtn);\n}\n\n// click on li(body) or X //\nlistEl.addEventListener('click', handleTask);\n\nfunction handleTask({ target }) {\n  if (target.nodeName === 'LI') {\n    target.classList.toggle('checked');\n    updateTaskStatus(target);\n    return;\n  }\n\n  if (target.nodeName === 'SPAN') {\n    target.parentNode.remove();\n    currentId -= 1;\n\n    const targetId = target.parentNode.getAttribute('id');\n    deleteTaskObj(targetId);\n    updateId();\n  }\n}\n\nfunction updateTaskStatus(target) {\n  if (target.classList.contains('checked')) {\n    const targetId = target.getAttribute('id');\n    const indexTaskStatusUpdate = tasksArray.findIndex(\n      task => task.ID == targetId\n    );\n    tasksArray[indexTaskStatusUpdate].isDone = true;\n  }\n\n  if (!target.classList.contains('checked')) {\n    const targetId = target.getAttribute('id');\n    const indexTaskStatusUpdate = tasksArray.findIndex(\n      task => task.ID == targetId\n    );\n    tasksArray[indexTaskStatusUpdate].isDone = false;\n  }\n\n  sendDataLocal();\n  console.log(' dupa ce am scjimbat starea task-ul', tasksArray);\n}\n\nfunction deleteTaskObj(targetId) {\n  const indexTaskForDelete = tasksArray.findIndex(task => task.ID == targetId);\n  tasksArray.splice(indexTaskForDelete, 1);\n\n  console.log(' dupa ce am sters task-ul', tasksArray);\n}\n\nfunction updateId() {\n  if (currentId > 0) {\n    const liArray = listEl.querySelectorAll('li');\n    for (let i = 0; i < currentId; i++) {\n      liArray[i].setAttribute('id', i);\n      tasksArray[i].ID = i;\n    }\n\n    sendDataLocal();\n    return;\n  }\n\n  if (currentId === 0) {\n    removeDataLocal();\n  }\n}\n\n// Reload page //\nwindow.addEventListener('DOMContentLoaded', fillTaskList);\n\nfunction fillTaskList() {\n  debugger;\n  const dataSavedObj = JSON.parse(localStorage.getItem('tasks'));\n\n  dataSavedObj.forEach(task => {\n    if (task.isDone === true) {\n      createLi(task.text);\n\n      // const taskId = task.ID;\n\n      const liChecked = document.getElementById(task.ID);\n      liChecked.classList.add('checked');\n\n      tasksArray[task.ID].isDone = true;\n\n      sendDataLocal();\n      return;\n    }\n\n    createLi(task.text);\n  });\n}\n\n// function handleLiStatus() {\n//   const li\n// }\n\n// function updateTasksArray(targetId) {\n//   const indexTaskForDelete = tasksArray.findIndex(task => task.ID === targetId);\n//   tasksArray.splice(indexTaskForDelete, 1);\n\n//   console.log(tasksArray);\n\n//   tasksArray.\n// }\n\n// function deleteTaskObj(targetId) {\n//   debugger;\n//   const indexTaskForDelete = tasksArray.findIndex(task => task.ID === targetId);\n//   tasksArray.splice(indexTaskForDelete, 1);\n\n//   console.log(' dupa ce am sters task-ul', tasksArray);\n// }\n\n// function updateTasksId() {\n//   if (currentId === 0) {\n//     return;\n//   }\n\n//   for (let i = 0; i < currentId; i++) {\n//     tasksArray[i].ID = i;\n//   }\n\n//   console.log(tasksArray);\n// }\n"],"names":["$61e09625a05a4e56$var$inpulEl","document","getElementById","$61e09625a05a4e56$var$addBtn","$61e09625a05a4e56$var$listEl","$61e09625a05a4e56$var$currentId","$61e09625a05a4e56$var$tasksArray","$61e09625a05a4e56$var$createLi","text","li","task","liEl","createElement","textContent","setAttribute","append","isDone","ID","getAttribute","push","$61e09625a05a4e56$var$sendDataLocal","console","log","closeBtn","classList","add","$61e09625a05a4e56$var$createCloseBtn","dataForSent","JSON","stringify","localStorage","setItem","addEventListener","value","alert","param","target","nodeName","toggle","contains","targetId","indexTaskStatusUpdate","findIndex","targetId1","indexTaskStatusUpdate1","$61e09625a05a4e56$var$updateTaskStatus","parentNode","remove","indexTaskForDelete","splice","$61e09625a05a4e56$var$deleteTaskObj","liArray","querySelectorAll","i","removeItem","$61e09625a05a4e56$var$updateId","window","parse","getItem","forEach"],"version":3,"file":"02-todo-list-storage.146d22b9.js.map"}